<html>
<head>
  <meta charset="UTF-8">
  <title>Risk Matrix Generator</title>

  <script language="javascript" type="text/javascript" src="js/vendor/p5.min.js"></script>
  <script language="javascript" src="js/vendor/p5.dom.min.js"></script>
  <script language="javascript" type="text/javascript" src="js/vendor/dat.gui.min.js"></script>
  <script src="js/vendor/angular.min.js"></script>
  <script src="js/vendor/xeditable.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>



  <script language="javascript" type="text/javascript" src="js/sketch.js"></script>
  <script language="javascript" type="text/javascript" src="js/rect.js"></script>
  <script language="javascript" type="text/javascript" src="js/risk.js"></script>
  <script language="javascript" type="text/javascript" src="js/gui.js"></script>
  <script language="javascript" type="text/javascript" src="js/dialog.js"></script>
  <script language="javascript" type="text/javascript" src="js/app.js"></script>
  <script language="javascript" type="text/javascript" src="js/controllers/MainController.js"></script>

  <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/datGui.css">
  <link rel="stylesheet" href="css/vendor/xeditable.css">


  <!-- Close warning -->
  <script>
      function verifyexit() { return 'Are you sure ?'; }           window.onbeforeunload = verifyexit;
  </script>



</head>

<body ng-app="matrix">

<div id="dialog" title="Edit Risks"  ng-controller="MainController">
  <h1>{{ title }}</h1>
  <p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
  <div ng-controller="MainController">
    <form editable-form name="tableform" onaftersave="saveTable()" oncancel="cancel()">

      <!-- table -->
      <table class="table table-bordered table-hover table-condensed">
        <tr style="font-weight: bold">
          <td style="width:40%">Number</td>
          <td style="width:30%">Likelihood</td>
          <td style="width:30%">Consequence</td>
          <td style="width:30%">
            <span ng-show="tableform.$visible">Action</span></td>
        </tr>
        <tr ng-repeat="risk in risks">
          <td>
            <!-- editable username (text with validation) -->
            <span text="risk.nr" e-form="tableform">
            {{ risk.nr || 'empty' }}
          </span>
          </td>
          <td>
            <!-- editable status (select-local) -->
            <span editable-text="risk.likelihood" e-form="tableform" >
            {{ risk.likelihood }}
          </span>
          </td>
          <td>
            <!-- editable group (select-remote) -->
            <span editable-text="risk.consequence" e-form="tableform" >
            {{ risk.consequence }}
          </span>
          </td>
          <td><button type="button" ng-show="tableform.$visible" ng-click="deleteRisk(risk.nr)" class="btn btn-danger pull-right">Del</button></td>
        </tr>
      </table>

      <!-- buttons -->
      <div class="btn-edit">
        <button type="button" class="btn btn-default" ng-show="!tableform.$visible" ng-click="tableform.$show()">
          edit
        </button>
      </div>
      <div class="btn-form" ng-show="tableform.$visible">
        <button type="button" ng-disabled="tableform.$waiting" ng-click="addUser()" class="btn btn-default pull-right">add row</button>
        <button type="submit" ng-disabled="tableform.$waiting" class="btn btn-primary">save</button>
        <button type="button" ng-disabled="tableform.$waiting" ng-click="tableform.$cancel()" class="btn btn-default">cancel</button>
      </div>

    </form>
  </div>
</div>


<div id=canvasHolder></div>




</body>
</html>